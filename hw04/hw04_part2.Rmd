---
title: "hw04"
output: github_document
---


```{r}
library(gapminder)
library(tidyverse)
library(knitr)
install.packages("devtools")
library(devtools)
```

For this part of the assignment I downloaded [data](http://appsso.eurostat.ec.europa.eu/nui/submitViewTableAction.do) on air pollutants by source sector from 1990 until 2015 for all countries within the European Union. In particular, I am interested in the air pollutant sulphur oxide and the industrial, agricultural, and waste sector sources. I saved the file as a `.csv` file and imported it into R markdown using the function `read.csv`.

```{r}
data.sox_emis <- read.csv("sox_emis.csv")
attach(data.sox_emis)

View(data.sox_emis) # to view the entire data set
knitr::kable(head(data.sox_emis, n=10), format = 'markdown')
```

Now, I first want to make this data look more like the gapminder data set.
```{r}
names(data.sox_emis) <- c("year", "country", "air_pollutant", "sect_source", "emission") #rename the columns
knitr::kable(head(data.sox_emis, n=10), format = 'markdown')
```

Now I want to make the total sector source its own column and remove the air pollutant column since it isn't necessary.
```{r}
#Total sector source emissions is its own column and the columns have been renamed
data.sox_emis_2 <- data.sox_emis %>%
  spread(sect_source,emission)
names(data.sox_emis_2) <- c("year", "country", "air-pollutant", "total sector source emissions")
```

```{r}
#Removing the air pollutant column
data.sox_emis_3 <- data.sox_emis_2 %>%
  select(year, country,"total sector source emissions")
knitr::kable(head(data.sox_emis_3, n=10), format = 'markdown', align = 'c', caption = "Sulphur Oxide Air Pollutants in Tonnes for Total Sectors of Emissions")  
```

Now lets join this data frame with the gapminder data frame using various `join` functions.

#### Left Join
```{r}
gapminder.sox.left <- left_join(gapminder, data.sox_emis_3, by = c("country", "year"))
View(gapminder.sox.left)
```

Since the European Union consists of 28 member states located in Europe we could also filter the gapminder data set to only include countries in Europe.
```{r}
gapminder_europe <- gapminder %>%
  filter(continent == "Europe")

gapminder_europe.sox.left <- left_join(gapminder_europe, data.sox_emis_3, by = c("country", "year"))
glimpse(gapminder_europe.sox.left)
```
Also we get this warning message because the `country` columns in both data sets are not just characters but are factors. To get rid of the warning message and convert the columns `country` to characters used the function `as.character()`.

```{r}
gap_europe <- gapminder_europe
gap_europe$country <- as.character(gap_europe$country)
data.sox_emis_3$country <- as.character(data.sox_emis_3$country)

gapminder_europe.sox.left <- left_join(gap_europe, data.sox_emis_3, by = c("country", "year"))
View(gapminder_europe.sox.left)
glimpse(gapminder_europe.sox.left)
```

#### Right Join
```{r}
gapminder_europe.sox.right <- right_join(gap_europe, data.sox_emis_3, by = c("country", "year"))
glimpse(gapminder_europe.sox.right)
```

#### Inner Join
```{r}
gapminder_europe.sox.inner <- inner_join(gap_europe, data.sox_emis_3, by = c("country", "year"))
glimpse(gapminder_europe.sox.inner)
```

#### Full Join
```{r}
gapminder_europe.sox.full <- full_join(gap_europe, data.sox_emis_3, by = c("country", "year"))
glimpse(gapminder_europe.sox.full)
```

#### Semi Join
```{r}
gapminder_europe.sox.semi <- semi_join(gap_europe, data.sox_emis_3, by = c("country", "year"))
glimpse(gapminder_europe.sox.semi)
```

#### Anti Join
```{r}
gapminder_europe.sox.anti <- anti_join(gap_europe, data.sox_emis_3, by = c("country", "year"))
glimpse(gapminder_europe.sox.anti)
```

